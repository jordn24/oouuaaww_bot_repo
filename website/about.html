

<!DOCTYPE HTML>
<!--
	Landed by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>OOUUAAWW Bot</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="icon" href="images/oouuaaww_bot.ico">
		<link rel="stylesheet" href="assets/js/styles/default.css">
		<link rel="stylesheet" href="assets/js/styles/dracula.css">
		<script src="assets/js/highlight.pack.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">
		<div id="page-wrapper">

	<!-- Header -->
			<!-- Header -->
			<header id="header">
				<span>
					<h1 style="margin-left:4%;" id="logo"><a href="index.html">OOUUAAWW Bot - About</a>
					</h1>
					<img style="float: left; padding-left: 1%;" src="images/oouuaaww_bot_icon.png" alt="" />
				</span>
				<nav id="nav">
					<ul>
						<li><a href="index.html">Home</a></li>
						<li>
							<a href="#">Commands</a>
							<ul>
								<li><a href="voice_commands.html">Voice Commands</a></li>
								<li><a href="img_commands.html">Image Commands</a></li>
								<li><a href="gif_commands.html">GIF Commands</a></li>
								<li>
									<ul>
										<li><a href="#">Option 1</a></li>
										<li><a href="#">Option 2</a></li>
										<li><a href="#">Option 3</a></li>
										<li><a href="#">Option 4</a></li>
									</ul>
								</li>
							</ul>
						</li>
						<li><a href="about.html">About</a></li>
						<li><a target="_blank" href="https://discord.com/oauth2/authorize?client_id=826758368122503178&scope=bot&permissions=6479666240" class="button primary">Invite Bot</a></li>
					</ul>
				</nav>
			</header>

			<!-- Main -->
				<div id="main" class="wrapper style1">
					<div class="container">
						<header class="major">
							<h2>About</h2>
							<p>Node JS - AWS - Bootstrap
							</p>
						</header>

						<!-- Text -->
							<section>
								<h3><a target="_blank" href="https://github.com/jordn24/oouuaaww_bot_repo" class="icon brands alt fa-github"> Github<span class="label"></span></a></h3>
								<hr />
								<header>
									<h2>Technologies</h2>
									<h3>Node.JS</h3>
									<p>Node.js is an open-source, cross-platform, back-end JavaScript runtime environment that runs on the V8 engine and executes JavaScript code outside a web browser.</p>
								</header>
								<header>
									<h3>Discord.JS</h3>
									<p>discord.js is a powerful node.js module that allows you to interact with the Discord API very easily.</p>
								</header>
								<header>
									<h3>Bootstrap</h3>
									<p>Bootstrap is a free and open-source CSS framework directed at responsive, mobile-first front-end web development. It contains CSS- and JavaScript-based design templates for typography, forms, buttons, navigation, and other interface components.</p>
								<hr />
								<header>
									<h2>Main Function</h2>
									<span class="fit"><img src="images/discord_api_graph.png" alt="" /></span>
								</header>
								<br>
								<header>
								</header>
								<hr />
								<h2>Image Commands</h2>
								<pre><code class="javascript">// Check if message is equal to any image command
Imgcommands.forEach(function (cmd, index) {
	if (message.content.toLowerCase() === cmd[0]) {
		// Image folder is found in json config based on command e.g. !jamesimg has /james as its second value
		const imgFolder = 'images/' + cmd[1];

		//Uses fs and Math libraries to pick random image from image folder
		fs.readdir(imgFolder, (err, files) => {
			filePath = "images/" + cmd[1] + "/" + files[Math.floor((Math.random() * files.length))]
		
			// Attaches image to message and sends
			const attachment = new MessageAttachment(filePath)
			message.reply(attachment)
			
		})
	}
});</code></pre>
<p>If a command in the json config matches the contents of a Message object, imgFolder is assigned the corresponding value in the json
	config which will be a folder. 
	<pre><code class="json">["!jamesimg", "james"],</code></pre>
	</p>
<p>The code uses the javascript module fs to read the directory and create 'files', an array with every file name in the 
	specified folder. Then a file path to a random image is constructed with a random value from the array 'files'. The image is then attached to a message and sent.</p>
<hr/>
<h2>Voice Commands</h2>
<pre><code>// Check if message is equal to any voice command
Vcommands.forEach(function (cmd, index) {
	if (message.content.toLowerCase() === cmd[0]) {
		// If sender is inside voice channel
		if (message.member.voice.channel) {
			// If bot hasn't been run too recently
			if (isReady) {
				isReady = false;
				// Join voice channel of sender
				var voiceChannel = message.member.voice.channel;
				voiceChannel.join().then(connection =>
				{
					// Play sound and leave on end
					const dispatcher = connection.play('./sounds/' + cmd[1]);
					dispatcher.on("finish", end => {
						voiceChannel.leave();
						});
				}).catch(err => console.log(err));
		
				isReady = true;
			}
		} else {
			// Reply with message when user is not in voice channel
			message.reply('You need to join a voice channel first you ' + insults[Math.floor(Math.random() * insults.length)]);
		}
	}
});</code></pre>
<p>If a command in the json config matches the contents of a Message object. The code checks if the user is not in a voice channel or if a voice command is already running and returns an error if either of these are true.
	If both checks pass, voiceChannel is assigned the channel id of the user who sent the command and it will join the channel. The js module dispatcher
	is used to play the mp3 file which is found in the second value in the json config. When the sound is finished it will leave the voice channel.
</p>
	<pre><code class="json">["!yeehoo", "yeehoo.mp3"],</code></pre>
	</p>
<hr/>
<h2>Gif Commands</h2>
<pre><code class="javascript">// Check if any gif commands match the message
Gifcommands.forEach(function (cmd, index) {
	if (message.content.toLowerCase() === cmd[0]) {
		// Search giphy api with the search terms in json config 
		giphy.search('gifs', {"q": cmd[1]})
		.then((response) => {
			var totalResponses = response.data.length;
			// Get the top 7 gifs and randomly pick one
			var responseIndex = Math.floor((Math.random() * 7) + 1) % totalResponses;
			var responseFinal = response.data[responseIndex];

			// Send gif
			message.channel.send({
				files: [responseFinal.images.fixed_height.url]
			})
		}).catch(() => {
			message.channel.send("Whoops something went wrong...");
		})
	
	}
});</code></pre>
<p>If a command in the json config matches the contents of a Message object, giphy api is used to return the top 10 gifs 
	of the given search term retrieved from the second value in the json config.
	<pre><code class="json">  ["!otter", "otter"]</code></pre></p>
<p>The gif is then sent to the channel of the user who sent the command.</p>
</section>
<hr/>
						
			<!-- Footer -->
				<footer id="footer">
					<ul class="icons">
						<li><a href="#" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
						<li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
						<li><a href="#" class="icon brands alt fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
						<li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
						<li><a href="#" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
						<li><a href="#" class="icon solid alt fa-envelope"><span class="label">Email</span></a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</footer>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>